import{d as $,T as t,U as u,Z as h,i as a,q as f,P as w,y as n,x as o,_ as N,J as l,M as e,s as O,N as D,O as F,z as g,v as d,l as I,m as V,$ as L}from"./entry.36e81a40.js";import{_ as x}from"./_plugin-vue_export-helper.c27b6911.js";const M=$({__name:"index",setup(A){const{$emitter:i,$Modal:r,$viewState:m,$Message:T}=I(),s=t.getAppSetting().clone();i.emit(u.LAYOUT_UPDATE,h.SETTING);const y=[{label:"English",value:"en"},{label:"中文(香港)",value:"zh-HK"}];async function v(){s.equals(t.getAppSetting())||(s.language!=t.getAppSetting().language,t.setAppSetting(s),i.emit(u.SETTING_UPDATED),T.info(e("common.saved")))}async function p(){t.logger.debug(`Back to last page: ${m.last_page}`),i.emit(u.LAYOUT_UPDATE,m.last_page),await V(L.getPageRoute(m.last_page))}async function b(){s.equals(t.getAppSetting())?(t.logger.debug("Setting is unchanged. Back to last page."),await p()):(t.logger.debug("Setting is changed. Ask for saved."),r.confirm({title:e("common.save_confirm_window.title",null,{target:e("structural.setting.title")}),content:e("common.save_confirm_window.content"),okText:e("common.save_confirm_window.save"),closable:!0,onOk:async()=>{v(),await p()},cancelText:e("common.save_confirm_window.cancel"),onCancel:async()=>{await p()}}))}return(Y,_)=>{const k=a("Option"),C=a("Select"),E=a("FormItem"),P=a("Form"),S=a("Button"),U=a("Space"),B=a("Card");return f(),w(B,{title:l(e)("structural.setting.title"),class:"mt-setting-card","dis-hover":""},{default:n(()=>[o(P,{inline:"","label-position":"top",onSubmit:_[1]||(_[1]=N(()=>{},["prevent"]))},{default:n(()=>[o(E,{label:l(e)("structural.setting.lang"),prop:"lang"},{default:n(()=>[o(C,{modelValue:l(s).language,"onUpdate:modelValue":_[0]||(_[0]=c=>l(s).language=c),style:{width:"200px"}},{default:n(()=>[(f(),O(D,null,F(y,c=>o(k,{value:c.value,key:c.value},{default:n(()=>[g(d(c.label),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),o(U,null,{default:n(()=>[o(S,{type:"primary",onClick:v},{default:n(()=>[g(d(l(e)("common.confirm")),1)]),_:1}),o(S,{onClick:b},{default:n(()=>[g(d(l(e)("common.cancel")),1)]),_:1})]),_:1})]),_:1},8,["title"])}}});const q=x(M,[["__scopeId","data-v-6ff21272"]]),z={};function G(A,i){const r=q;return f(),w(r)}const K=x(z,[["render",G]]);export{K as default};
