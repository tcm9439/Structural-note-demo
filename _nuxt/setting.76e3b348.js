import{d as h,U as t,ad as u,aH as I,i as a,q as f,Q as w,y as n,x as o,ae as N,K as l,N as e,s as O,O as $,P as D,z as g,v as d,l as F,m as V,aI as L}from"./entry.f443a7a4.js";import{_ as x}from"./_plugin-vue_export-helper.c27b6911.js";const q=h({__name:"index",setup(A){const{$emitter:i,$Modal:r,$viewState:m,$Message:y}=F(),s=t.getAppSetting().clone();i.emit(u.LAYOUT_UPDATE,I.SETTING);const T=[{label:"English",value:"en"},{label:"中文(香港)",value:"zh-HK"}];async function v(){s.equals(t.getAppSetting())||(s.language!=t.getAppSetting().language,t.setAppSetting(s),i.emit(u.SETTING_UPDATED),y.info(e("common.saved")))}async function p(){t.logger.debug(`Back to last page: ${m.last_page}`),i.emit(u.LAYOUT_UPDATE,m.last_page),await V(L.getPageRoute(m.last_page))}async function b(){s.equals(t.getAppSetting())?(t.logger.debug("Setting is unchanged. Back to last page."),await p()):(t.logger.debug("Setting is changed. Ask for saved."),r.confirm({title:e("common.save_confirm_window.title",null,{target:e("structural.setting.title")}),content:e("common.save_confirm_window.content"),okText:e("common.save_confirm_window.save"),closable:!0,onOk:async()=>{v(),await p()},cancelText:e("common.save_confirm_window.cancel"),onCancel:async()=>{await p()}}))}return(H,_)=>{const k=a("Option"),C=a("Select"),E=a("FormItem"),P=a("Form"),S=a("Button"),U=a("Space"),B=a("Card");return f(),w(B,{title:l(e)("structural.setting.title"),class:"mt-setting-card","dis-hover":""},{default:n(()=>[o(P,{inline:"","label-position":"top",onSubmit:_[1]||(_[1]=N(()=>{},["prevent"]))},{default:n(()=>[o(E,{label:l(e)("structural.setting.lang"),prop:"lang"},{default:n(()=>[o(C,{modelValue:l(s).language,"onUpdate:modelValue":_[0]||(_[0]=c=>l(s).language=c),style:{width:"200px"}},{default:n(()=>[(f(),O($,null,D(T,c=>o(k,{value:c.value,key:c.value},{default:n(()=>[g(d(c.label),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),o(U,null,{default:n(()=>[o(S,{type:"primary",onClick:v},{default:n(()=>[g(d(l(e)("common.confirm")),1)]),_:1}),o(S,{onClick:b},{default:n(()=>[g(d(l(e)("common.cancel")),1)]),_:1})]),_:1})]),_:1},8,["title"])}}});const M=x(q,[["__scopeId","data-v-6ff21272"]]),z={};function G(A,i){const r=M;return f(),w(r)}const Q=x(z,[["render",G]]);export{Q as default};
