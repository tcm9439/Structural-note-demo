import{_ as b}from"./_plugin-vue_export-helper.c27b6911.js";import{q as m,s as M,am as P,i as u,Q as w,y as e,x as t,z as o,d as U,r as C,c as K,ad as d,e as B,v as _,K as n,N as a,l as O,aM as A,aa as D,T as p,U as $,aI as Y,aH as R,m as j,a8 as q,t as F}from"./entry.0d0293ca.js";import{N as I,e as H}from"./NoteExportHandler.afda00ad.js";const Q={},W={class:"mt-layout-header"};function X(h,l){return m(),M("div",W,[P(h.$slots,"default",{},void 0,!0)])}const V=b(Q,[["render",X],["__scopeId","data-v-1d61b380"]]);const J={};function Z(h,l){const s=u("Col"),i=u("Row"),r=V;return m(),w(r,null,{default:e(()=>[t(i,{justify:"center",class:"mt-layout-title"},{default:e(()=>[t(s,null,{default:e(()=>[o(" Structural Note ")]),_:1})]),_:1})]),_:1})}const ee=b(J,[["render",Z],["__scopeId","data-v-f7901e1b"]]),te=U({__name:"note",setup(h){const{$viewState:l,$emitter:s}=O(),i=C(l.editing_note_name),r=K(()=>l.editing_note!=null),x=C(0);async function E(){const{$Modal:y,$viewState:N}=O();let v=async()=>{let f=Y.getPageRoute(R.SETTING);$.logger.debug(`Navigate to setting page: ${f}`),await j(f)};N.isNoteChange()?await y.confirm({title:a("common.save_confirm_window.title",null,{target:a("structural.file.note")}),content:a("structural.setting.save_before.content"),okText:a("common.save_confirm_window.save"),onOk:async()=>{try{await p.saveNote(),$.logger.debug("Note saved before setting update."),v()}catch(f){H(f)}},cancelText:a("common.cancel")}):v()}async function T(y){try{switch(y){case"new-window":await p.createNote();break;case"open-file":await p.openNote();break;case"close-file":r.value&&await p.closeNote();break;case"save-file":r.value&&await p.saveNote();break;case"save-as-file":r.value&&await p.saveNote(!0);break;case"export-md":r.value&&await I.emitShowConvertPreviewEvent(D.MARKDOWN);break;case"export-txt":r.value&&await I.emitShowConvertPreviewEvent(D.TEXT);break;case"setting":r.value&&await E();break;case"undo":A.undo();break;case"redo":A.redo();break}}catch(N){H(N)}x.value++}function g(){k()}function k(){i.value=l.editing_note_name}return s.on(d.NOTE_OPENED,g),s.on(d.NOTE_CLOSED,g),s.on(d.NOTE_SAVED,k),B(()=>{s.off(d.NOTE_OPENED,g),s.off(d.NOTE_CLOSED,g),s.off(d.NOTE_SAVED,k)}),(y,N)=>{const v=u("Col"),f=u("Row"),c=u("MenuItem"),L=u("MenuGroup"),S=u("Submenu"),G=u("Menu"),z=V;return m(),w(z,null,{default:e(()=>[t(f,null,{default:e(()=>[t(v,{class:"mt-layout-note-title"},{default:e(()=>[o(_(n(i)),1)]),_:1})]),_:1}),(m(),w(f,{class:"mt-layout-toolbar",key:n(x)},{default:e(()=>[t(v,{class:"mt-layout-toolbar"},{default:e(()=>[t(G,{mode:"horizontal",onOnSelect:T},{default:e(()=>[t(S,{name:"file-operation"},{title:e(()=>[o(_(n(a)("structural.header.file_menu")),1)]),default:e(()=>[t(c,{name:"open-file"},{default:e(()=>[o(_(n(a)("structural.header.file_open")),1)]),_:1}),t(c,{name:"close-file"},{default:e(()=>[o(_(n(a)("structural.header.file_close")),1)]),_:1}),t(c,{name:"save-file"},{default:e(()=>[o(_(n(a)("structural.header.file_save")),1)]),_:1}),t(c,{name:"save-as-file"},{default:e(()=>[o(_(n(a)("structural.header.file_save_as")),1)]),_:1}),t(L,{title:n(a)("structural.header.file_export_submenu")},{default:e(()=>[t(c,{name:"export-md"},{default:e(()=>[o(_(n(a)("structural.header.file_export_md")),1)]),_:1}),t(c,{name:"export-txt"},{default:e(()=>[o(_(n(a)("structural.header.file_export_txt")),1)]),_:1})]),_:1},8,["title"])]),_:1}),t(S,{name:"edit-operation"},{title:e(()=>[o(_(n(a)("structural.header.edit_menu")),1)]),default:e(()=>[t(c,{name:"undo"},{default:e(()=>[o(_(n(a)("structural.header.edit_undo")),1)]),_:1}),t(c,{name:"redo"},{default:e(()=>[o(_(n(a)("structural.header.edit_redo")),1)]),_:1})]),_:1}),t(S,{name:"window-operation"},{title:e(()=>[o(_(n(a)("structural.header.window_menu")),1)]),default:e(()=>[t(c,{name:"new-window"},{default:e(()=>[o(_(n(a)("structural.header.window_new")),1)]),_:1})]),_:1}),t(c,{name:"setting"},{default:e(()=>[o(_(n(a)("structural.header.setting_menu")),1)]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1})}}});const ae=b(te,[["__scopeId","data-v-07cb12bf"]]),ne={class:"layout"},oe={class:"content"},_e=U({__name:"default",setup(h){const{$emitter:l}=O(),s=C("note");function i(r){switch($.logger.trace("Update header layout to "+r),r){case R.SETTING:s.value="none";break;default:s.value="note";break}}return l.on(d.LAYOUT_UPDATE,i),B(()=>{l.off(d.LAYOUT_UPDATE,i)}),(r,x)=>{const E=ee,T=ae;return m(),M("div",ne,[n(s)=="none"?(m(),w(E,{key:0})):n(s)=="note"?(m(),w(T,{key:1})):q("",!0),F("div",oe,[P(r.$slots,"default",{},void 0,!0)])])}}});const le=b(_e,[["__scopeId","data-v-2573a81f"]]);export{le as default};
